<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title> My Diary</title>

<link rel=" stylesheet" href="StyleSheet1.css" />  
 <script src ="clock.js"></script>
 </head>
<body id = "firstPage">
    <h1 id="title">Your Dream</h1>

</div>
    </div>

    <div id = menu>
    <p>Tool Box</p>
    </div>
    <script>
       let buttonsCreated = false; // Flag to check if buttons are already created

// Create buttons inside the menu
function createButtons() {
    if (!buttonsCreated) {
        const myMenu = document.getElementById('menu');

        // Create buttons
        const Settings = document.createElement('button');
        Settings.id = "settings";
        const Vlog = document.createElement('button');
        Vlog.id = "vlog";
        const History = document.createElement('button');
        History.id = "story";
        const Account = document.createElement('button');
        Account.id = "account";

        // Set text for buttons
        Settings.innerText = 'Settings';
        Vlog.innerText = 'Vlog';
        History.innerText = 'History';
        Account.innerText = 'Account';

        // Add buttons to the menu
        myMenu.appendChild(Vlog);
        myMenu.appendChild(History);
        myMenu.appendChild(Account);
        myMenu.appendChild(Settings);

        // Set flag to true to prevent recreating buttons
        buttonsCreated = true;

        // Add click event listeners for the buttons
        Vlog.onclick = () => alert("Settings page is under construction. Give me some time, please");
        History.onclick = () => window.location.replace("history.html");
        Account.onclick = () => alert("Settings page is under construction. Give me some time, please");
        Settings.onclick = () => alert("Settings page is under construction.  Give me some time, please");
    }
}

// Show buttons when mouse is over the menu
function showButtons() {
    const buttons = document.querySelectorAll('#menu button');
    buttons.forEach(button => {
        button.style.visibility = 'visible'; // Show the buttons
    });
}

// Hide buttons when mouse leaves the menu
function hideButtons() {
    const buttons = document.querySelectorAll('#menu button');
    buttons.forEach(button => {
        button.style.visibility = 'hidden'; // Hide the buttons
    });
}

// Add event listeners for hover
const menu = document.getElementById('menu');
if (menu) {
    menu.addEventListener('mouseover', function() {
        createButtons();  // Create and show buttons on hover
        showButtons();  // Show buttons when hovering
    });
    menu.addEventListener('mouseout', hideButtons); // Hide buttons when mouse leaves
}

// Handle the "Save" button click to save feelings
const submit = document.getElementById("submit");
submit.onclick = function() {
    const feelings = document.getElementById("feel").value;
    if (feelings) {
        alert("Your feelings have been saved: " + feelings);
        // Optionally, save it to localStorage or send it to a server
        // localStorage.setItem("feelings", feelings);
    } else {
        alert("Please enter your feelings before saving.");
    }
};
     </script>

    <button type="button" id = "history">Dream Book</button>
    <script>

   const bookButton = document.getElementById("history");
    bookButton.onclick = newpage;
        function newpage(){
            location.replace("formindex.html");
        }
    </script>

    <div>
        <div>
            <div id="box">
            <!-- missing label-->
             <label for = "feel" id = "labelForFeelings">Your Feelings matter</label>
             <textarea  id = "feel" name ="feel"></textarea>
                
            </div>
            
        </div>
    
    </div>
    <button type ="button" id="submit">submit</button>
    <script>

           let feelingsArray = JSON.parse(localStorage.getItem("feelingsArray")) || [];

// Handle the "Save" button click to save feelings data
const submitButton = document.getElementById("submit");
submitButton.onclick = function() {
    const feelings = document.getElementById("feel").value;

    if (feelings) {
        // Push the new feeling to the array
        feelingsArray.push(feelings);

        // Save the updated array in localStorage
        localStorage.setItem("feelingsArray", JSON.stringify(feelingsArray));

        // Optionally show a confirmation message
        alert("Your feelings have been saved!");

        // Clear the textarea for new input
        document.getElementById("feel").value = '';

        // Redirect to the history page to view all feelings
        window.location.replace("history.html");
    } else {
        alert("Please enter your feelings before saving.");
    }
};
    </script>
   

</body>

</html>